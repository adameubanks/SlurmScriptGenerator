<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Job Script Generator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="UVAJobScriptGenerator.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="UVAJobScriptGenerator.js"></script>
</head>
<body>
<div class="container mt-5">
    <h1 class="mb-4">Job Script Generator</h1>
    <div id="UVAJobScriptGenerator"></div>
    <script type="text/javascript">
        var uva_script_gen = new UVAScriptGen(document.getElementById("UVAJobScriptGenerator"));
        uva_script_gen.settings.features = {
            names: ["amd", "intel", "rivanna","afton"],
            //info_base_url: "/documentation/features.html#",
            show: true
        };
        
        uva_script_gen.settings.partitions = {
            names: ["Standard", "Parallel", "Interactive", "GPU"],
            // info_base_url: "/documentation/partitions.php?part=",
            show: true
        };

        uva_script_gen.settings.gres = {
            names: ["RTX3090", "RTX2080", "a6000", "a40", "v100", "v100_40", "v100_80"],
            // info_base_url:  leave for future
            show: true
        };
        
        // This function update the visibility of the gres options checkbox, only when the user pick 
        // the GPU or Interactive option the gres checkbox will appear
        // function updateGresVisibility() {
        //     var partitions = document.querySelectorAll('input[name="partition"]:checked');
        //     var showGres = false;
        //     partitions.forEach(function (partition){
        //         if (partition.value === "GPU" || partition.value === "Interactive"){
        //             showGres = true;
        //         }
        //     });
        //     uva_script_gen.settings.gres.show = showGres;
        //     var gresContainer = document.getElementById("gresOptions");
        //     gresContainer.style.display = showGres ? 'block' : 'none';
        // }
        // uva_script_gen.settings.features_status = {
        //     "amd": {"nodes_free": 0, "nodes_total": 2, "cores_free": 0, "cores_total": 32},
        //     "avx": {"nodes_free": 35, "nodes_total": 320, "cores_free": 817, "cores_total": 5120},
        //     "ib": {"nodes_free": 71, "nodes_total": 356, "cores_free": 1185, "cores_total": 5488},
        //     "intel": {"nodes_free": 114, "nodes_total": 894, "cores_free": 2266, "cores_total": 12076},
        //     "m2050": {"nodes_free": 1, "nodes_total": 1, "cores_free": 12, "cores_total": 12},
        //     "s1070": {"nodes_free": 1, "nodes_total": 2, "cores_free": 8, "cores_total": 16},
        //     "sse4.1": {"nodes_free": 114, "nodes_total": 894, "cores_free": 2266, "cores_total": 12076},
        //     "sse4.2": {"nodes_free": 113, "nodes_total": 892, "cores_free": 2258, "cores_total": 12060},
        // };
        // uva_script_gen.settings.partitions_status = {
        //     "p1": {"nodes_free": 35, "nodes_total": 320, "cores_free": 817, "cores_total": 5120},
        //     "p2": {"nodes_free": 78, "nodes_total": 572, "cores_free": 1441, "cores_total": 6940},
        //     "p3": {"nodes_free": 2, "nodes_total": 32, "cores_free": 39, "cores_total": 512},
        // };
        uva_script_gen.init();

        // // Create container for GRES options and initially hide it
        // var partitionContainer = document.createElement('div');
        // partitionContainer.id = "partitionOptions";
        // uva_script_gen.settings.partitions.names.forEach(function (partition) {
        //     var label = document.createElement('label');
        //     var checkbox = document.createElement('input');
        //     checkbox.type = "checkbox";
        //     checkbox.name = "partition";
        //     checkbox.value = partition;
        //     checkbox.onclick = updateGresVisibility;
        //     label.appendChild(checkbox);
        //     label.appendChild(document.createTextNode(partition));
        //     partitionContainer.appendChild(label);
        // });
        // document.getElementById("UVAJobScriptGenerator").appendChild(partitionContainer);
        
        // var gresContainer = document.createElement('div');
        // gresContainer.id = "gresOptions";
        // gresContainer.style.display = 'none';
        // uva_script_gen.settings.gres.names.forEach(function (gres) {
        //     var label = document.createElement('label');
        //     var checkbox = document.createElement('input');
        //     checkbox.type = "checkbox";
        //     checkbox.name = "gres";
        //     checkbox.value = gres;
        //     label.appendChild(checkbox);
        //     label.appendChild(document.createTextNode(gres));
        //     gresContainer.appendChild(label);
        // });
        // document.getElementById("UVAJobScriptGenerator").appendChild(gresContainer);
    </script>
</div>
</body>
</html>
